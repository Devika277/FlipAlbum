{% load static %}


<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upload Flipbook Images</title>

  <!-- âœ… CORRECT -->
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
<style>
    /* ===== Upload Page ===== */

h2, h3 {
  margin-bottom: 10px;
}

/* Upload form spacing */
form {
  margin-bottom: 20px;
}

/* Gallery layout */
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
  max-width: 700px;   /* ðŸ”’ prevents full-page stretch */
}

/* Image card */
.img-card {
  position: relative;
  width: 120px;
  height: 120px;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid #ddd;
  background: #f9f9f9;
}

/* Thumbnail image */
.img-card img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* ðŸ”¥ keeps image cropped nicely */
}

/* Delete button */
.delete-btn {
  position: absolute;
  top: 4px;
  right: 4px;
  background: rgba(0, 0, 0, 0.7);
  color: white;
  text-decoration: none;
  font-size: 14px;
  padding: 2px 6px;
  border-radius: 50%;
  display: none;
}

/* Show delete on hover */
.img-card:hover .delete-btn {
  display: block;
}

</style>

<h2>Upload Flipbook Images (Max 15)</h2>

{% if error %}
  <p style="color:red;">{{ error }}</p>
{% endif %}

<form method="POST" enctype="multipart/form-data">
  {% csrf_token %}

  <!-- Front / Back checkbox -->
  <label>
    <input type="checkbox" name="is_front"> Front Page
  </label>
  <br><br>

  <!-- Title and Date (for front page) -->
  <label>Title (for front page):</label>
  <input type="text" name="title" placeholder="Book Title">
  <br><br>

  <label>Date (for front page):</label>
  <input type="date" name="date">
  <br><br>

  <!-- Caption (for normal pages) -->
  <label>Caption (for other pages):</label>
  <input type="text" name="caption" placeholder="Page caption">
  <br><br>

  <!-- File upload -->
  <label>Choose Images:</label>
  <input type="file" name="images" multiple accept="image/*">
  <br><br>

  <button type="submit">Upload</button>
</form>

<hr>

<!-- <h3>Uploaded Pages:</h3>
<div class="flipbook">
  {% for img in images %}
    <div class="page">
      {% if img.is_front %}
        <div class="hard">
          <h2>{{ img.title }}</h2>
          <small>{{ img.date }}</small>
        </div>
        <div class="hard"></div>
      {% else %}
        <img src="{{ img.image.url }}" alt="">
        <small>{{ img.caption }}</small>
      {% endif %}
    </div>
  {% endfor %}
</div> -->
<hr>

<h3>Uploaded Images</h3>

<div class="gallery">
  {% for img in images %}
    <div class="img-card">
      <img src="{{ img.image.url }}">
      <a href="{% url 'delete_image' img.id %}" class="delete-btn">âœ–</a>
    </div>
  {% empty %}
    <p>No images uploaded yet</p>
  {% endfor %}
</div>

<br>

<a href="{% url 'index' %}">
  <button>ðŸ“– Open Flipbook</button>
</a>
</body>
</html>